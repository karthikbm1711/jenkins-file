pipeline {
     agent any
       environment {
        BRANCH = 'master'
        GIT_REPO = 'https://github.com/Halesh1807/batch2-assignment.git'
    }
       stages {
        when {
                branch 'master'
                beforeAgent true
            }
          
          stage('TESTING') {
            parallel {
                   stage('TESTING1') {
                      steps {
                       script {
                          if(env.BRANCH == 'master') 
                        {						  
                          sh 'echo "This is a TESTING1 stage"'
                          sh 'sleep 3'
						}
						else {
						   error("Build failed because of this and that")
                       }
                    }
                  }
				  }
						stage('TESTING2') {
                     
                            steps {
                                 script {
								 if(env.BRANCH == 'master') 
                                 {						  
                                      sh 'echo "This is a TESTING1 stage"'
                                      sh 'sleep 3'
						         }
						           else {
						             error("Build failed because of this and that")
                       }
                       
						    }
                        }
                }
           }     
        }
    }
}
